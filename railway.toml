[build]
builder = "dockerfile"

[deploy]
healthcheckPath = "/setup/healthz"
healthcheckTimeout = 300
restartPolicyType = "on_failure"

# Require a persistent volume mounted at /data (Railway).
requiredMountPath = "/data"

[variables]
# NOTE: Railway injects PORT automatically.
# Do not set PORT here; Railway templates may not apply it reliably and hardcoding
# can cause domain routing mismatches.
OPENCLAW_STATE_DIR = "/data/.openclaw"
OPENCLAW_WORKSPACE_DIR = "/data/workspace"

# Railway injects RAILWAY_PUBLIC_DOMAIN automatically and this template uses it
# to populate gateway.controlUi.allowedOrigins, which is required since openclaw
# added origin-checking to the Control UI WebSocket in recent releases.
# If you use a custom domain, add it here (comma-separated full origins):
# OPENCLAW_CONTROL_UI_ALLOWED_ORIGINS = "https://my-custom-domain.example.com"
